{% extends 'base.html' %}

{% block title %}{{ item.title }}{% endblock %}

{% block content %}
<div>
    <h2>{{ item.title }}</h2>

    <div>
        {% if item.is_image %}
            <img src="{{ item.file.url }}" alt="{{ item.title }}">
        {% else %}
            <video controls>
                <source src="{{ item.file.url }}" type="video/mp4">
                –í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø—ñ–¥—Ç—Ä–∏–º—É—î –≤—ñ–¥–µ–æ.
            </video>
        {% endif %}
    </div>

    {% if item.description %}
        <h5>–û–ø–∏—Å</h5>
        <p>{{ item.description }}</p>
    {% endif %}

    <h5>–Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è</h5>
    <p><strong>–ê–≤—Ç–æ—Ä:</strong> {{ item.author.username|default:"–ê–Ω–æ–Ω—ñ–º" }}</p>
    <p><strong>–î–∞—Ç–∞:</strong> {{ item.created_at|date:"d.m.Y H:i" }}</p>
    <p><strong>–¢–∏–ø:</strong> {{ item.get_media_type_display }}</p>
    
    {% if item.game_name %}
        <p><strong>–ì—Ä–∞:</strong> {{ item.game_name }}</p>
    {% endif %}

    <div>
        <a href="{{ item.file.url }}" download>üì• –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏</a>
        <span> | </span>
        <a href="{% url 'gallery:list' %}">‚¨ÖÔ∏è –ù–∞–∑–∞–¥ –¥–æ –≥–∞–ª–µ—Ä–µ—ó</a>
        
        {% if user.is_authenticated %}
            {% if user == item.author or user.is_staff or user.is_superuser %}
                <span> | </span>
                <a href="{% url 'gallery:delete' item.pk %}">üóëÔ∏è –í–∏–¥–∞–ª–∏—Ç–∏</a>
            {% endif %}
        {% endif %}
    </div>

    {% if messages %}
        <div>
            {% for message in messages %}
                <div>
                    {{ message }}
                </div>
            {% endfor %}
        </div>
    {% endif %}
</div>
{% endblock %}