{% extends 'base.html' %}
{% load static %}

{% block title %}{{ material.title }} - GameDev Club{% endblock %}

{% block content %}
<div class="material-detail-page">
    <!-- Навігація назад -->
    <div class="mb-4">
        <a href="{% url 'materials:material_list' %}" class="btn btn-secondary">
            <i class="fas fa-arrow-left"></i> Назад до списку
        </a>
    </div>

    <!-- Заголовок матеріалу -->
    <div class="material-header-section mb-4">
        <div class="row align-items-center">
            <div class="col-12">
                <h1 class="material-title-detail">
                    <i class="{{ material.get_icon }} material-icon-large"></i>
                    {{ material.title }}
                </h1>
            </div>
        </div>

        <div class="material-meta mt-3">
            <span class="badge material-badge-large {{ material.get_badge_color }}">
                <i class="fas fa-gamepad"></i> {{ material.get_engine_display }}
            </span>
            <span class="category-badge">
                <i class="fas fa-tag"></i> {{ material.category.title }}
            </span>
            <span class="type-badge">
                <i class="fas fa-file-alt"></i> {{ material.get_file_type_display }}
            </span>
        </div>
    </div>

    <!-- Опис -->
    {% if material.description %}
        <div class="card description-card mb-4">
            <div class="card-body">
                <h5 class="card-title">
                    <i class="fas fa-info-circle"></i> Опис
                </h5>
                <p class="description-text">{{ material.description }}</p>
            </div>
        </div>
    {% endif %}

    <!-- Контент -->
    <div class="card content-card">
        <div class="card-body">
            {% if material.file_type == 'video' %}
                <!-- YouTube відео -->
                {% if material.youtube_id %}
                    <div class="video-container">
                        <h5 class="content-title mb-4">
                            <i class="fab fa-youtube"></i> Відео
                        </h5>
                        <div class="youtube-wrapper">
                            <iframe
                                src="https://www.youtube.com/embed/{{ material.youtube_id }}"
                                frameborder="0"
                                allowfullscreen
                                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                            ></iframe>
                        </div>
                    </div>
                {% else %}
                    <!-- Зовнішнє відео -->
                    <div class="external-link">
                        <i class="fas fa-play-circle external-icon"></i>
                        <h5>Відео доступне за посиланням</h5>
                        <a href="{{ material.file_link }}" target="_blank" class="btn btn-primary btn-lg">
                            <i class="fas fa-play"></i> Дивитися відео
                        </a>
                    </div>
                {% endif %}

            {% elif material.file_type == 'file' and material.file_upload %}
                <!-- Завантажуваний файл -->
                <div class="download-section">
                    <i class="fas fa-file-download download-icon"></i>
                    <h5 class="mb-3">Файл готовий до завантаження</h5>

                    <div class="file-info mb-4">
                        <div class="info-item">
                            <i class="fas fa-file"></i>
                            <span>Тип: {{ material.get_file_type_display }}</span>
                        </div>
                        <div class="info-item">
                            <i class="fas fa-weight-hanging"></i>
                            <span>Розмір: {{ material.file_upload.size|filesizeformat }}</span>
                        </div>
                    </div>

                    <a href="{{ material.file_upload.url }}" download class="btn btn-primary btn-lg">
                        <i class="fas fa-download"></i> Завантажити файл
                    </a>
                </div>

            {% elif material.file_type == 'link' %}
                <!-- Зовнішнє посилання -->
                <div class="external-link">
                    <i class="fas fa-external-link-alt external-icon"></i>
                    <h5>Ресурс доступний на зовнішньому сайті</h5>
                    <a href="{{ material.file_link }}" target="_blank" class="btn btn-primary btn-lg">
                        <i class="fas fa-link"></i> Перейти на сайт
                    </a>
                </div>

            {% endif %}
        </div>
    </div>
</div>

<style>
/* Заголовок матеріалу */
.material-header-section {
    padding: 2rem 0;
    border-bottom: 2px solid var(--border-color);
}

.material-title-detail {
    font-family: 'Orbitron', sans-serif;
    font-weight: 700;
    font-size: 2.2rem;
    color: var(--text-light);
    display: flex;
    align-items: center;
    gap: 1rem;
    flex-wrap: wrap;
}

.material-icon-large {
    font-size: 3rem;
    color: var(--accent-cyan);
    animation: pulse 2s infinite;
}

.material-meta {
    display: flex;
    gap: 1rem;
    flex-wrap: wrap;
}

.material-badge-large {
    font-size: 0.9rem;
    font-weight: 600;
    padding: 0.6rem 1.2rem;
    border-radius: 25px;
}

.category-badge,
.type-badge {
    background: rgba(139, 92, 246, 0.2);
    border: 1px solid var(--accent-purple);
    color: var(--text-light);
    padding: 0.6rem 1.2rem;
    border-radius: 25px;
    font-weight: 600;
    font-size: 0.9rem;
}

.category-badge i,
.type-badge i {
    margin-right: 0.5rem;
    color: var(--accent-cyan);
}

/* Картка опису */
.description-card {
    background: rgba(21, 26, 48, 0.95);
    border: 2px solid var(--accent-purple);
    box-shadow: 0 8px 30px rgba(139, 92, 246, 0.3);
}

.description-card .card-title {
    font-family: 'Orbitron', sans-serif;
    font-weight: 600;
    color: var(--accent-cyan);
    margin-bottom: 1rem;
}

.description-text {
    color: var(--text-light);
    font-size: 1.1rem;
    line-height: 1.8;
    margin: 0;
}

/* Картка контенту */
.content-card {
    background: rgba(21, 26, 48, 0.95);
    border: 2px solid var(--accent-cyan);
    box-shadow: 0 8px 30px rgba(6, 182, 212, 0.3);
}

.content-title {
    font-family: 'Orbitron', sans-serif;
    font-weight: 600;
    color: var(--accent-cyan);
}

/* YouTube відео */
.video-container {
    width: 100%;
}

.youtube-wrapper {
    position: relative;
    padding-bottom: 56.25%; /* 16:9 aspect ratio */
    height: 0;
    overflow: hidden;
    border-radius: 12px;
    box-shadow: 0 10px 40px rgba(6, 182, 212, 0.4);
    border: 3px solid var(--accent-cyan);
}

.youtube-wrapper iframe {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border-radius: 12px;
}

/* Завантаження файлу */
.download-section {
    text-align: center;
    padding: 3rem 2rem;
}

.download-icon {
    font-size: 5rem;
    color: var(--accent-purple);
    margin-bottom: 1.5rem;
    animation: bounce 2s infinite;
}

@keyframes bounce {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
}

.download-section h5 {
    font-family: 'Orbitron', sans-serif;
    font-weight: 600;
    color: var(--text-light);
    font-size: 1.5rem;
    margin-bottom: 2rem;
}

.file-info {
    display: flex;
    justify-content: center;
    gap: 2rem;
    flex-wrap: wrap;
}

.info-item {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    background: rgba(10, 14, 39, 0.8);
    padding: 0.8rem 1.5rem;
    border-radius: 25px;
    border: 1px solid var(--border-color);
    color: var(--text-light);
    font-weight: 600;
}

.info-item i {
    color: var(--accent-cyan);
}

/* Зовнішнє посилання */
.external-link {
    text-align: center;
    padding: 3rem 2rem;
}

.external-icon {
    font-size: 5rem;
    color: var(--accent-pink);
    margin-bottom: 1.5rem;
    animation: pulse 2s infinite;
}

.external-link h5 {
    font-family: 'Orbitron', sans-serif;
    font-weight: 600;
    color: var(--text-light);
    font-size: 1.5rem;
    margin-bottom: 2rem;
}

/* Кнопки */
.btn-lg {
    padding: 1rem 2.5rem;
    font-size: 1.2rem;
    font-weight: 700;
    border-radius: 30px;
    box-shadow: 0 8px 20px rgba(139, 92, 246, 0.5);
}

.btn-lg:hover {
    transform: translateY(-3px);
    box-shadow: 0 12px 30px rgba(139, 92, 246, 0.6);
}

/* Адаптивність */
@media (max-width: 768px) {
    .material-title-detail {
        font-size: 1.6rem;
    }

    .material-icon-large {
        font-size: 2rem;
    }

    .material-meta {
        font-size: 0.8rem;
    }

    .file-info {
        flex-direction: column;
        gap: 1rem;
    }
}
</style>
{% endblock %}
